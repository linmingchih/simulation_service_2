{% extends 'layout.html' %}
{% block content %}
<h2>{{ t('User Management') }}</h2>
<form method="post" class="mb-3">
  <div class="row g-2">
    <div class="col-auto">
      <input type="text" name="username" placeholder="{{ t('Username') }}" class="form-control" required>
    </div>
    <div class="col-auto">
      <input type="password" name="password" placeholder="{{ t('Password') }}" class="form-control" required>
    </div>
    <div class="col-auto">
      <select name="role" class="form-select">
        <option value="user">{{ t('User') }}</option>
        <option value="admin">{{ t('Admin') }}</option>
      </select>
    </div>
    <div class="col-auto">
      <button type="submit" class="btn btn-primary">{{ t('Add User') }}</button>
    </div>
  </div>
</form>
<table class="table">
  <thead><tr><th>{{ t('Username') }}</th><th>{{ t('Role') }}</th><th></th></tr></thead>
  <tbody>
  {% for username, info in users.items() %}
  <tr>
    <td>{{ username }}</td>
    <td>{{ info.role }}</td>
    <td>
      {% if username != 'admin' %}
      <form action="{{ url_for('admin.delete_user', username=username) }}" method="post" style="display:inline">
        <button type="submit" class="btn btn-sm btn-danger">{{ t('Delete') }}</button>
      </form>
      {% endif %}
    </td>
  </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
